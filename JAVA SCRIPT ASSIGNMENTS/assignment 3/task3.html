<!DOCTYPE html>
<html>
<head>
    <title>Location Logger</title>
</head>
<body onload="loadHistory()">

    <h2>Location-Based Logger</h2>

    <button onclick="getLocation()">Get My Location</button>

    <h3>Current Location:</h3>
    <p id="currentLocation"></p>

    <h3>Last 5 Locations:</h3>
    <ul id="locationHistory"></ul>

    <script>
        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition, showError);
            } else {
                alert("Geolocation is not supported by this browser.");
            }
        }

        function showPosition(position) {
            var latitude = position.coords.latitude;
            var longitude = position.coords.longitude;

            document.getElementById("currentLocation").innerHTML =
                "Latitude: " + latitude + "<br>Longitude: " + longitude;

            var locations = JSON.parse(localStorage.getItem("locations")) || [];

            var newEntry = {
                lat: latitude,
                long: longitude,
                time: new Date().toLocaleString()
            };

            locations.unshift(newEntry);

            if (locations.length > 5) {
                locations.pop();
            }

            localStorage.setItem("locations", JSON.stringify(locations));
            loadHistory();
        }

        function showError(error) {
            switch(error.code) {
                case error.PERMISSION_DENIED:
                    alert("User denied the request for Geolocation.");
                    break;
                case error.POSITION_UNAVAILABLE:
                    alert("Location information is unavailable.");
                    break;
                case error.TIMEOUT:
                    alert("The request to get user location timed out.");
                    break;
                default:
                    alert("An unknown error occurred.");
            }
        }

        function loadHistory() {
            var locations = JSON.parse(localStorage.getItem("locations")) || [];
            var list = document.getElementById("locationHistory");
            list.innerHTML = "";

            locations.forEach(function(loc) {
                var li = document.createElement("li");
                li.innerHTML = 
                    "Lat: " + loc.lat + 
                    ", Long: " + loc.long + 
                    " (" + loc.time + ")";
                list.appendChild(li);
            });
        }
    </script>

</body>
</html>